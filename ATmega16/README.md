# ATmega16 core (Quartus Prime Lite Edition)

### This folder contains files for the ATmega16 microcontroller. 

- ATmega16_reg.VHDL - Contains definitions of the names of bits, registers, vectors and IO-s for the ATmega16 microcontroller. 
The names come from the DataSheet or the .h file from Atmel Studio.

- common.vhd - original by Juergen Sauermann https://docplayer.net/21596341-How-to-design-your-own-cpu-on-fpgas-with-vhdl.html

- cpu_core.vhd - original by Juergen Sauermann, modified by Jacek Binkul

- opc_deco.vhd - original by Juergen Sauermann, modified by Jacek Binkul

- data_path.vhd - original by Juergen Sauermann https://docplayer.net/21596341-How-to-design-your-own-cpu-on-fpgas-with-vhdl.html

- alu.vhd - original by Juergen Sauermann, modified and fixed by Jacek Binkul

- register_file.vhd - original by Juergen Sauermann https://docplayer.net/21596341-How-to-design-your-own-cpu-on-fpgas-with-vhdl.html

- reg_16.vhd - original by Juergen Sauermann https://docplayer.net/21596341-How-to-design-your-own-cpu-on-fpgas-with-vhdl.html

- data_mem.vhd - original by Juergen Sauermann, modified by Jacek Binkul for Altera Quartus MegaWizard

- opc_fetch.vhd - original by Juergen Sauermann, modified by Jacek Binkul for direct program loading from Atmel Studio 7.0

- prog_mem.vhd - original by Juergen Sauermann, modified by Jacek Binkul for direct program loading from Atmel Studio 7.0

Sram and Flash module were generated by Altera Quartus MegaWizard. The samples are in catalogs Altera_Sram and Altera_Flash.
In the same way can be generated by Xilinx ISE. At the start Flash RAM have to be filled with .mif file,
with 0xFFFF values (file Flash.mif) to avoid unexpected operation of the controller. 
After finishing work with program in Atmel Studio 7.0 two-port RAM can be exchanged by ROM module with suitable two .mif file.

- io.vhd - by Jacek Binkul. Created for maximum cooperation with ATmega16 registers. I decide to separate I/O ports
because FPGA Spartan-3e and CycloneIV have no internal tri-state buffers.

- interrupt.vhd - original by Juergen Sauermann, modified by Jacek Binkul for better working with ATmega16 interrupt vectors.

- spi_master.vhd - by Jacek Binkul. Created for maximum cooperation with ATmega16 registers. Max clock speed 50MHz,
for optimum and maximum work with SD card in SPI mode.

- timer0.vhd - by Jacek Binkul. Simple Timer0 - 256 bits.

- Usart.vhd - by Jacek Binkul. Only single speed is allowed. It dont use U2X bit and dont use synchronus mode master/slave
You need calculate the value of UBRR for input clock. Simple calculation for 25MHz and 30MHz is given at the end of the file

- ISP_programer.vhd - by Jacek Binkul. It works with Atmel Studio 7.0. I have used AVR ISP programmer mkII - it works with 
max clock speed 2MHz. IMPORTANT : ISP Reset have to be external pull up to +VCC with 10k resistor.